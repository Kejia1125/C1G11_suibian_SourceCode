{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/LENOVO/Downloads/smart-campus-monitor-app-draft%20%281%29/lib/weather.ts"],"sourcesContent":["// Weather API integration using Open-Meteo for hourly temperature\n\nexport interface HourlyWeatherData {\n  time: string[]\n  temperature: number[]\n  humidity: number[]\n}\n\nexport interface WeatherData {\n  temperature: number\n  humidity: number\n  description: string\n  location: string\n  timestamp: Date\n  hourly?: HourlyWeatherData\n}\n\nexport async function fetchWeatherData(latitude = 3.139, longitude = 101.6869): Promise<WeatherData> {\n  try {\n    const url = `https://api.open-meteo.com/v1/forecast?latitude=${latitude}&longitude=${longitude}&current=temperature_2m,relative_humidity_2m,weather_code&hourly=temperature_2m,relative_humidity_2m&forecast_days=1&timezone=Asia/Singapore`\n\n    console.log(\"[v0] Fetching weather from Open-Meteo API...\")\n    console.log(\"[v0] Weather API URL:\", url)\n\n    const response = await fetch(url, {\n      method: \"GET\",\n      headers: {\n        Accept: \"application/json\",\n      },\n      cache: \"no-store\",\n    })\n\n    console.log(\"[v0] Weather API response status:\", response.status)\n\n    if (!response.ok) {\n      const errorText = await response.text()\n      console.error(\"[v0] Weather API error response:\", errorText)\n      throw new Error(`Weather API failed with status ${response.status}`)\n    }\n\n    const data = await response.json()\n    console.log(\"[v0] Weather API success! Temperature:\", data.current.temperature_2m)\n\n    return {\n      temperature: Math.round(data.current.temperature_2m),\n      humidity: data.current.relative_humidity_2m,\n      description: getWeatherDescription(data.current.weather_code),\n      location: \"Kuala Lumpur\",\n      timestamp: new Date(),\n      hourly: {\n        time: data.hourly.time,\n        temperature: data.hourly.temperature_2m.map((t: number) => Math.round(t)),\n        humidity: data.hourly.relative_humidity_2m,\n      },\n    }\n  } catch (error) {\n    console.error(\"[v0] Weather fetch error:\", error)\n    console.log(\"[v0] Using dummy weather data as fallback\")\n    // Return dummy data as fallback with hourly mock data\n    return generateDummyWeatherWithHourly()\n  }\n}\n\nfunction getWeatherDescription(code: number): string {\n  if (code === 0) return \"Clear sky\"\n  if (code <= 3) return \"Partly cloudy\"\n  if (code <= 48) return \"Foggy\"\n  if (code <= 67) return \"Rainy\"\n  if (code <= 77) return \"Snowy\"\n  if (code <= 82) return \"Rain showers\"\n  if (code <= 86) return \"Snow showers\"\n  return \"Thunderstorm\"\n}\n\nfunction generateDummyWeatherWithHourly(): WeatherData {\n  const now = new Date()\n  const hourlyTimes: string[] = []\n  const hourlyTemps: number[] = []\n  const hourlyHumidity: number[] = []\n\n  // Generate 24 hours of data\n  for (let i = 0; i < 24; i++) {\n    const hour = new Date(now)\n    hour.setHours(i, 0, 0, 0)\n    hourlyTimes.push(hour.toISOString())\n\n    // Temperature varies throughout the day (cooler at night, warmer during day)\n    const baseTemp = 28\n    const variation = Math.sin(((i - 6) * Math.PI) / 12) * 5\n    hourlyTemps.push(Math.round(baseTemp + variation))\n\n    // Humidity inversely related to temperature\n    hourlyHumidity.push(Math.round(75 - variation))\n  }\n\n  return {\n    temperature: hourlyTemps[now.getHours()],\n    humidity: hourlyHumidity[now.getHours()],\n    description: \"Partly cloudy\",\n    location: \"Kuala Lumpur\",\n    timestamp: now,\n    hourly: {\n      time: hourlyTimes,\n      temperature: hourlyTemps,\n      humidity: hourlyHumidity,\n    },\n  }\n}\n\nexport function generateDummyWeather(): WeatherData {\n  const temps = [28, 30, 32, 31, 33, 29]\n  const descriptions = [\"Clear sky\", \"Partly cloudy\", \"Sunny\", \"Hot and humid\"]\n  const randomTemp = temps[Math.floor(Math.random() * temps.length)]\n\n  return {\n    temperature: randomTemp,\n    humidity: 70 + Math.floor(Math.random() * 15),\n    description: descriptions[Math.floor(Math.random() * descriptions.length)],\n    location: \"Kuala Lumpur\",\n    timestamp: new Date(),\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 160, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/LENOVO/Downloads/smart-campus-monitor-app-draft%20%281%29/app/api/weather/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\"\nimport { fetchWeatherData } from \"@/lib/weather\"\n\nexport async function GET() {\n  try {\n    console.log(\"[v0] Weather API route called\")\n    const weather = await fetchWeatherData()\n    console.log(\"[v0] Returning weather data:\", { temp: weather.temperature, humidity: weather.humidity })\n    return NextResponse.json(weather)\n  } catch (error) {\n    console.error(\"[v0] Weather API route error:\", error)\n    return NextResponse.json({ error: \"Failed to fetch weather\" }, { status: 500 })\n  }\n}\n\nexport const runtime = \"nodejs\"\nexport const dynamic = \"force-dynamic\"\n"],"names":[],"mappings":";;;;;;;;AAAA;AACA;;;AAEO,eAAe;IACpB,IAAI;QACF,QAAQ,GAAG,CAAC;QACZ,MAAM,UAAU,MAAM,IAAA,wMAAgB;QACtC,QAAQ,GAAG,CAAC,gCAAgC;YAAE,MAAM,QAAQ,WAAW;YAAE,UAAU,QAAQ,QAAQ;QAAC;QACpG,OAAO,oNAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,iCAAiC;QAC/C,OAAO,oNAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAA0B,GAAG;YAAE,QAAQ;QAAI;IAC/E;AACF;AAEO,MAAM,UAAU;AAChB,MAAM,UAAU"}}]
}